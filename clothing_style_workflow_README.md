# ComfyUI 服装风格工作流节点

## 项目简介

这是一个用于 ComfyUI 的工作流节点系统，基于服装风格自适应器（ClothingStyleAdapter）构建，可以根据不同国家和地区的文化习惯自动调整服装风格。该工作流节点系统提供了更完整的功能和更灵活的使用方式，使用户能够轻松创建符合特定地区文化特点的服装图像。

## 主要功能

- **完整工作流**：提供从输入图像到输出调整后图像的完整处理流程
- **多地区支持**：支持中国、日本、印度、中东、欧洲、北美、非洲、东南亚等多个地区的服装风格调整
- **智能提示词生成**：根据地区特点自动生成适合的提示词和负面提示词
- **图像处理**：对图像进行风格调整，使其更符合目标地区的审美
- **多种工作流模式**：支持完整工作流、仅提示词调整、仅图像处理等多种模式
- **风格信息显示**：提供专门的节点显示风格信息，方便用户了解地区特点
- **地区风格选择器**：可以直接选择特定地区的风格信息，无需输入图像

## 安装方法

1. 确保已安装 ComfyUI
2. 将 `clothing_style_adapter.py` 和 `clothing_style_workflow.py` 文件复制到 ComfyUI 的自定义节点目录中（通常为 `ComfyUI/custom_nodes/` 目录）
3. 重启 ComfyUI

## 节点说明

### 1. 服装风格工作流（ClothingStyleWorkflow）

这是主要的工作流节点，提供完整的服装风格调整功能。

#### 输入参数

- **image**：输入图像
- **region**：目标地区，可选择多个预设地区
- **adaptation_strength**：调整强度，范围0.0-1.0
- **enable_image_processing**：是否启用图像处理，「是」或「否」
- **workflow_mode**：工作流模式，可选「完整工作流」、「仅提示词调整」、「仅图像处理」
- **prompt**（可选）：原始提示词
- **negative_prompt**（可选）：原始负面提示词
- **seed**（可选）：随机种子，设为0则自动生成
- **steps**（可选）：采样步数
- **cfg**（可选）：CFG比例
- **sampler_name**（可选）：采样器名称
- **width**（可选）：图像宽度
- **height**（可选）：图像高度
- **batch_size**（可选）：批处理大小

#### 输出

- **adapted_image**：调整后的图像
- **adapted_prompt**：调整后的提示词
- **adapted_negative_prompt**：调整后的负面提示词
- **seed**：使用的随机种子
- **style_info**：风格信息对象，可连接到风格信息显示器

### 2. 风格信息显示器（StyleInfoDisplay）

用于显示服装风格信息的节点。

#### 输入参数

- **style_info**：风格信息对象（从服装风格工作流或地区风格选择器获取）
- **display_mode**：显示模式，可选「完整信息」、「仅风格信息」、「仅提示词信息」

#### 输出

- **style_text**：格式化的风格信息文本

### 3. 地区风格选择器（RegionalStyleSelector）

用于直接选择特定地区的风格信息，无需输入图像。

#### 输入参数

- **region**：目标地区
- **output_format**：输出格式，可选「提示词」、「负面提示词」、「风格信息」、「全部」

#### 输出

- **style_prompt**：风格提示词
- **negative_prompt**：负面提示词
- **style_info**：风格信息对象

## 使用示例

### 基本工作流

1. 加载图像 → 服装风格工作流（地区：「中国」，调整强度：0.75）→ 预览图像
2. 服装风格工作流 → 风格信息显示器 → 文本显示

### 高级工作流

1. 加载图像 + 文本提示词 + 负面提示词 → 服装风格工作流（地区：「日本」，调整强度：0.8）→ KSampler → 保存图像
2. 地区风格选择器（地区：「印度」）→ KSampler → 保存图像

## 示例工作流文件

项目包含了一个示例工作流文件 `clothing_style_workflow_example.json`，可以直接导入到 ComfyUI 中使用。导入方法：

1. 打开 ComfyUI
2. 点击右上角的「Load」按钮
3. 选择 `clothing_style_workflow_example.json` 文件
4. 工作流将自动加载到 ComfyUI 中

## 工作流模式说明

### 完整工作流

同时调整提示词和图像，提供最全面的服装风格调整。

### 仅提示词调整

只调整提示词和负面提示词，不对图像进行处理。适合与其他图像生成节点配合使用。

### 仅图像处理

只对图像进行处理，不调整提示词。适合已有提示词但需要调整图像风格的情况。

## 高级用法

- **跨文化内容创作**：为不同地区的受众创建适合的服装风格
- **文化敏感性检查**：检查生成的服装是否符合目标地区的文化习惯
- **风格实验**：尝试不同地区的服装风格，获取创作灵感
- **教育用途**：学习不同地区的服装文化特点和禁忌
- **批量处理**：结合循环节点，批量处理多个地区的服装风格

## 注意事项

- 该工作流节点系统基于 ClothingStyleAdapter 类，需要确保 `clothing_style_adapter.py` 文件存在
- 为获得最佳效果，建议将该节点与其他图像生成节点（如KSampler）配合使用
- 数据库中的风格信息是概括性的，可能无法涵盖所有文化细节
- 在商业用途中，请确保尊重相关文化和知识产权

## 贡献与反馈
欢迎提交问题issue和功能建议，共同改进这个工作流节点系统！