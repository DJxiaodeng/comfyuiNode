# ComfyUI 服装风格自适应节点

## 项目简介

这是一个用于 ComfyUI 的自定义节点，可以根据不同国家和地区的文化习惯自动调整服装风格，避开当地禁忌风格搭配。该节点可以帮助用户在生成跨文化内容时，确保服装风格符合目标地区的文化习惯和审美偏好。

## 主要功能

- **多地区支持**：支持中国、日本、印度、中东、欧洲、北美、非洲、东南亚、韩国、俄罗斯、拉丁美洲、北欧等多个地区的服装风格调整
- **智能提示词生成**：根据地区特点自动生成适合的提示词和负面提示词
- **图像处理**：可选择性地对图像进行风格调整，使其更符合目标地区的审美
- **调整强度控制**：通过调整强度参数，控制风格转换的程度
- **风格预览**：自动保存风格预览图像，方便用户查看效果
- **种子控制**：支持设置随机种子，确保结果可复现

## 安装方法

1. 确保已安装 ComfyUI
2. 将 `clothing_style_adapter.py` 文件复制到 ComfyUI 的自定义节点目录中（通常为 `ComfyUI/custom_nodes/` 目录）
3. 重启 ComfyUI

## 使用方法

1. 在 ComfyUI 工作流中添加「服装风格自适应器」节点
2. 将需要调整风格的图像连接到节点的 `image` 输入端
3. 选择目标地区（如「中国」、「日本」、「印度」等）
4. 设置调整强度（0.0-1.0，值越大调整越明显）
5. 选择是否启用图像处理（「是」或「否」）
6. 可选：设置原始提示词、负面提示词、种子、步数、CFG比例和采样器
7. 运行工作流，获取调整后的图像和提示词

## 参数说明

### 必选参数

- **image**：输入图像
- **region**：目标地区，可选择多个预设地区
- **adaptation_strength**：调整强度，范围0.0-1.0
- **enable_image_processing**：是否启用图像处理，「是」或「否」

### 可选参数

- **prompt**：原始提示词
- **negative_prompt**：原始负面提示词
- **seed**：随机种子，设为0则自动生成
- **steps**：采样步数
- **cfg**：CFG比例
- **sampler_name**：采样器名称

## 输出说明

- **adapted_image**：调整后的图像
- **adapted_prompt**：调整后的提示词
- **adapted_negative_prompt**：调整后的负面提示词
- **seed**：使用的随机种子

## 工作原理

1. 节点根据选择的地区，从内置的服装风格数据库中获取相关信息
2. 根据调整强度，将原始提示词与地区特定的风格提示词进行混合
3. 同样地，将原始负面提示词与地区特定的禁忌风格提示词进行混合
4. 如果启用图像处理，节点会根据地区颜色偏好对图像进行简单的颜色调整
5. 最后，节点会保存一份风格预览图像，并返回调整后的图像和提示词

## 地区数据库

节点内置了丰富的地区服装风格数据库，包括：

- 推荐风格：适合该地区的服装风格列表
- 禁忌风格：该地区避讳的服装风格列表
- 颜色偏好：该地区偏好的颜色列表
- 风格描述：对该地区服装风格的简要描述

## 示例工作流

一个基本的使用示例：

1. 加载图像 → 服装风格自适应器（地区：「日本」，调整强度：0.8）→ 保存图像
2. 文本提示词 → 服装风格自适应器（地区：「中国」，调整强度：0.7）→ KSampler → 保存图像

## 高级用法

- **跨文化内容创作**：为不同地区的受众创建适合的服装风格
- **文化敏感性检查**：检查生成的服装是否符合目标地区的文化习惯
- **风格实验**：尝试不同地区的服装风格，获取创作灵感
- **教育用途**：学习不同地区的服装文化特点和禁忌

## 注意事项

- 该节点主要通过提示词调整来影响图像生成，图像处理功能仅提供简单的颜色调整
- 为获得最佳效果，建议将该节点与其他图像生成节点（如KSampler）配合使用
- 数据库中的风格信息是概括性的，可能无法涵盖所有文化细节
- 在商业用途中，请确保尊重相关文化和知识产权

## 贡献与反馈

欢迎提交问题报告和功能建议，共同改进这个节点！